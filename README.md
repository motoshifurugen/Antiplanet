# Antiplanet

**A civilization lifecycle simulator built with Expo React Native**

## æ¦‚è¦

Antiplanetã¯æƒ‘æ˜Ÿã¨æ–‡æ˜ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆã™ã‚‹MVPã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚Expo SDK 53ã€TypeScriptã€React Navigation v7ã‚’ä½¿ç”¨ã—ã¦æ§‹ç¯‰ã•ã‚Œã¦ã„ã¾ã™ã€‚

### ç¾åœ¨ã®æ©Ÿèƒ½ï¼ˆMVPç‰ˆï¼‰

- **Planet View**: ãƒ¡ã‚¤ãƒ³ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
- **Civilizations**: æ–‡æ˜ä¸€è¦§ã®è¡¨ç¤ºï¼ˆãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ï¼‰
- **Planet Settings**: æƒ‘æ˜Ÿç›®æ¨™ã¨æœŸé™ã®è¨­å®šãƒ•ã‚©ãƒ¼ãƒ 

### ç¾åœ¨ã®è¿½åŠ æ©Ÿèƒ½

- **æ–‡æ˜çŠ¶æ…‹ã‚·ã‚¹ãƒ†ãƒ **: æœ€çµ‚ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ã‹ã‚‰ã®çµŒéæ™‚é–“ã«åŸºã¥ãæ±ºå®šè«–çš„ãªçŠ¶æ…‹è©•ä¾¡
  - `uninitialized` â†’ `developing` (0-6æ—¥) â†’ `decaying` (7-20æ—¥) â†’ `ocean` (21æ—¥+)
  - ã‚ªãƒ³ãƒ‡ãƒãƒ³ãƒ‰è©•ä¾¡ï¼ˆã‚¿ã‚¤ãƒãƒ¼ä¸ä½¿ç”¨ï¼‰
  - é‡è¦ãªçŠ¶æ…‹é·ç§»ã®ã¿æ°¸ç¶šåŒ–
- **ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ãƒˆã‚¢**: Zustandãƒ™ãƒ¼ã‚¹ã®çŠ¶æ…‹ç®¡ç†
  - ãƒ¢ãƒƒã‚¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ (`demo-uid`) ã§ã®æ–‡æ˜ãƒ»æƒ‘æ˜Ÿç›®æ¨™ç®¡ç†
  - ãƒªãƒã‚¸ãƒˆãƒªçµ±åˆã¨ã‚¹ãƒ†ãƒ¼ãƒˆãƒã‚·ãƒ³è‡ªå‹•é©ç”¨
  - ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹è¨˜éŒ²æ™‚ã®è‡ªå‹•çŠ¶æ…‹æ›´æ–°

### å°†æ¥ã®è¿½åŠ äºˆå®šæ©Ÿèƒ½

- 3Dãƒ—ãƒ©ãƒãƒƒãƒˆãƒ“ãƒ¥ãƒ¼ï¼ˆexpo-threeï¼‰
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ–‡æ˜ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
- ã‚ˆã‚Šè©³ç´°ãªæ–‡æ˜ç®¡ç†æ©Ÿèƒ½

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

- **Framework**: Expo SDK 53
- **Language**: TypeScript
- **Navigation**: React Navigation v7 (Native Stack)
- **Development**: ESLint + Prettier
- **Platform**: iOS / Android / Web

## ä¾å­˜é–¢ä¿‚

### ã‚³ã‚¢ä¾å­˜é–¢ä¿‚
- **State Management**: `zustand` ^4 - è»½é‡ã§ç›´æ„Ÿçš„ãªçŠ¶æ…‹ç®¡ç†
- **Backend**: `firebase` ^11 - ãƒ¢ã‚¸ãƒ¥ãƒ©ãƒ¼v9+ APIä½¿ç”¨
- **3D Rendering**: `expo-three` + `expo-gl` + `expo-asset` - Expoç®¡ç†ç’°å¢ƒã§ã®3Dãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
- **Types**: `@types/three` - Three.jså‹å®šç¾©

### è¨­å®šçŠ¶æ³
- âœ… **Zustand**: ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ãƒˆã‚¢å®Ÿè£…æ¸ˆã¿ï¼ˆãƒ¢ãƒƒã‚¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ãƒ‡ãƒ¼ã‚¿ç®¡ç†ï¼‰
- âœ… **Firebase**: ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ»åˆæœŸåŒ–æ¸ˆã¿ï¼ˆç’°å¢ƒå¤‰æ•°è¨­å®šã§æœ‰åŠ¹åŒ–ï¼‰
- âœ… **State Machine**: æ–‡æ˜çŠ¶æ…‹ã®æ±ºå®šè«–çš„è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…æ¸ˆã¿
- âœ… **Three.js**: ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ï¼ˆ`src/lib/three.ts`ã«ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ä½œæˆï¼‰
- ğŸ”„ **è¨­å®š**: Zustandãƒ»Firebaseãƒ»State Machineå®Œäº†ã€Three.jsè¨­å®šã¯å°†æ¥å®Ÿè£…äºˆå®š

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã¨å®Ÿè¡Œ

### å‰ææ¡ä»¶

- Node.js (æ¨å¥¨: v18ä»¥ä¸Š)
- npm ã¾ãŸã¯ pnpm
- Expo CLIï¼ˆã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¨å¥¨ï¼‰

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install
# ã¾ãŸã¯
pnpm install
```

### ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

Firebaseæ©Ÿèƒ½ã‚’ä½¿ç”¨ã™ã‚‹ã«ã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã« `.env` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¦ãã ã•ã„ï¼š

```bash
# .env
FIREBASE_API_KEY=your_api_key_here
FIREBASE_AUTH_DOMAIN=your_project.firebaseapp.com
FIREBASE_PROJECT_ID=your_project_id
FIREBASE_APP_ID=your_app_id
```

**ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †**:
1. Firebase Consoleï¼ˆhttps://console.firebase.google.comï¼‰ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ
2. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š > å…¨èˆ¬ã‚¿ãƒ–ã‹ã‚‰è¨­å®šå€¤ã‚’å–å¾—
3. ä¸Šè¨˜ã®å€¤ã‚’ `.env` ãƒ•ã‚¡ã‚¤ãƒ«ã«è¨­å®š

**æ³¨æ„**: 
- `.env` ãƒ•ã‚¡ã‚¤ãƒ«ã¯ `.gitignore` ã«å«ã¾ã‚Œã¦ã„ã¾ã™
- ç¾åœ¨ã¯è¨­å®šãªã—ã§ã‚‚ã‚¢ãƒ—ãƒªã¯å‹•ä½œã—ã¾ã™ï¼ˆFirebaseæ©Ÿèƒ½ã¯ç„¡åŠ¹ï¼‰
- Expoç’°å¢ƒå¤‰æ•°ã¯ `process.env.*` ã§ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½

### é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•

```bash
# é–‹ç™ºãƒ¢ãƒ¼ãƒ‰ã§Expoã‚’èµ·å‹•
npm run dev
# ã¾ãŸã¯
npx expo start

# ç‰¹å®šã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§èµ·å‹•
npm run ios      # iOS ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼
npm run android  # Android ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼
npm run web      # ãƒ–ãƒ©ã‚¦ã‚¶
```

### é–‹ç™ºãƒ„ãƒ¼ãƒ«

```bash
# ESLintã§ã‚³ãƒ¼ãƒ‰ãƒã‚§ãƒƒã‚¯
npm run lint

# ESLintã§è‡ªå‹•ä¿®æ­£
npm run lint:fix

# Prettierã§ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
npm run format

# TypeScriptå‹ãƒã‚§ãƒƒã‚¯
npm run typecheck
```

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
src/
â”œâ”€â”€ app/
â”‚   â””â”€â”€ navigation/
â”‚       â””â”€â”€ RootNavigator.tsx    # ãƒ¡ã‚¤ãƒ³ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š
â”œâ”€â”€ screens/
â”‚   â”œâ”€â”€ Home.tsx                 # ãƒ›ãƒ¼ãƒ ã‚¹ã‚¯ãƒªãƒ¼ãƒ³
â”‚   â”œâ”€â”€ Civilizations.tsx        # æ–‡æ˜ä¸€è¦§ã‚¹ã‚¯ãƒªãƒ¼ãƒ³
â”‚   â””â”€â”€ PlanetSettings.tsx       # æƒ‘æ˜Ÿè¨­å®šã‚¹ã‚¯ãƒªãƒ¼ãƒ³
â”œâ”€â”€ components/
â”‚   â””â”€â”€ UI/
â”‚       â””â”€â”€ Screen.tsx           # å®‰å…¨é ˜åŸŸä»˜ãã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒ©ãƒƒãƒ‘ãƒ¼
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ __tests__/
â”‚   â”‚   â””â”€â”€ civilizationStateMachine.test.ts # ã‚»ãƒ«ãƒ•ãƒ†ã‚¹ãƒˆï¼ˆé–‹ç™ºç’°å¢ƒã®ã¿ï¼‰
â”‚   â”œâ”€â”€ index.ts                 # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
â”‚   â”œâ”€â”€ firebase.ts              # Firebase v11åˆæœŸåŒ–ãƒ»ãƒ˜ãƒ«ãƒ‘ãƒ¼
â”‚   â”œâ”€â”€ civilizationStateMachine.ts # æ–‡æ˜çŠ¶æ…‹ã®æ±ºå®šè«–çš„è©•ä¾¡
â”‚   â””â”€â”€ three.ts                 # Three.jsè¨­å®šï¼ˆãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ï¼‰
â”œâ”€â”€ repositories/
â”‚   â”œâ”€â”€ index.ts                 # ãƒªãƒã‚¸ãƒˆãƒªã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ paths.ts                 # Firestoreãƒ‘ã‚¹ãƒ“ãƒ«ãƒ€ãƒ¼
â”‚   â”œâ”€â”€ planetGoalRepository.ts  # æƒ‘æ˜Ÿç›®æ¨™CRUD
â”‚   â”œâ”€â”€ civilizationRepository.ts # æ–‡æ˜CRUD
â”‚   â””â”€â”€ progressLogRepository.ts # ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒ­ã‚°CRUD
â”œâ”€â”€ stores/
â”‚   â”œâ”€â”€ index.ts                 # ã‚¹ãƒˆã‚¢ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
â”‚   â””â”€â”€ useAppStore.ts           # ãƒ¡ã‚¤ãƒ³Zustandã‚¹ãƒˆã‚¢
â”œâ”€â”€ theme/
â”‚   â”œâ”€â”€ colors.ts                # ã‚«ãƒ©ãƒ¼ãƒ†ãƒ¼ãƒå®šç¾©
â”‚   â””â”€â”€ spacing.ts               # ã‚¹ãƒšãƒ¼ã‚·ãƒ³ã‚°å®šç¾©
â””â”€â”€ types.ts                     # ã‚³ã‚¢å‹å®šç¾©
```

## é–‹ç™ºã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

- **ã‚³ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«**: Prettierã®è¨­å®šã«å¾“ã†ï¼ˆsingleQuote: true, semi: trueï¼‰
- **å‹å®‰å…¨æ€§**: TypeScriptã®å³å¯†ãƒ¢ãƒ¼ãƒ‰ã‚’ä½¿ç”¨
- **ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³**: React Navigation v7ã®native-stackã‚’ä½¿ç”¨
- **ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°**: React Nativeã®æ¨™æº–StyleSheetã‚’ä½¿ç”¨

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

1. **Expo Goã‚¢ãƒ—ãƒªã§å‹•ä½œã—ãªã„å ´åˆ**
   - Expo Go ã‚¢ãƒ—ãƒªãŒæœ€æ–°ç‰ˆã‹ç¢ºèª
   - ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã‚’ç¢ºèª

2. **ä¾å­˜é–¢ä¿‚ã®ã‚¨ãƒ©ãƒ¼**

   ```bash
   npm install --force
   # ã¾ãŸã¯
   rm -rf node_modules package-lock.json && npm install
   ```

3. **Metro bundlerã®å•é¡Œ**
   ```bash
   npx expo start --clear
   ```

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯MITãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®ä¸‹ã§å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚

---

**æ³¨æ„**: 3Dæ©Ÿèƒ½ï¼ˆexpo-threeï¼‰ã¨Firebaseçµ±åˆã¯å°†æ¥ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§è¿½åŠ äºˆå®šã§ã™ã€‚
